#### 常用结构体和函数的头文件

- 主机字节序和网络字节序的转换

  ```c
  #include <netinet/in.h>
  unsigned long int htonl (unsigned long int hostlong);
  unsigned long int ntohl (unsigned long int netlong);
  unsigned short int htohs (unsigned short int hostshort);
  unsigned short int ntohs (unsigned short int netshort);
  ```

- 通用socket地址

  ```c
  #include <bits/socket.h>
  struct sockaddr;
  ```

- 专用socket地址

  ```c
  #include <sys/un.h>
  struct sockaddr_un;
  #include <netinet/in.h> 
  struct sockaddr_in;
  struct sockaddr_in6;
  ```

- IP地址转换函数

  ```c
  #include <arpa/inet.h>
  in_addr_t inet_addr(const char* strptr);//点分十进制转化为网络字节序
  int inet_aton(const char* cp, struct in_addr* inp);//同上,但存入第二个参数
  char* inet_ntoa(struct in_addr in);//网络字节序转点分十进制(不看重入函数)
  
  //af指定地址族 AF_INET(ipv4) 或者 AF_INET6(ipv6)
  int inet_pton(int af, const char* src, void dst);
  const char* inet_ntop(int af,const void src, char* dst, socklen_t cnt);
  //inet_ntop 第3个参数 可以使用以下两个宏
  #define INET_ADDRSTRLEN 16
  #define INET6_ADDRSTRLEN 64
  ```

- 截取文件名

  ```c
  #include <libgen.h>
  char * basename(char* path);
  ```

  

##### 数据读写

- TCP数据读写

  ```C
  #include <sys/types.h>
  #include <sys/socket.h>
  ssize_t recv(int sockfd,void* buf,size_t len,int flags);
  ssize_t send(int sockfd,const void* buf,size_t len,int flags);
  //flag为MSG_OOB时标志发送外带数据
  ```

- UDP数据读写

  ```c
  #include <sys/types.h>
  #include <sys/socket.h>
  ssize_t recvfrom(int sockfd,void* buf,size_t len,int flags,struct sockaddr* src_addr,socklen_t* addrlen);
  ssize_t sendto(int sockfd,void* buf,size_t len,int flags,struct sockaddr* dest_addr,socklen_t* addrlen);
  ```

- 通用数据读写函数

  ```c
  #include <sys/socket.h>
  struct msghdr{
    void* msg_name;
    socklen_t msg_namelen;
    struct iovec* msg_iov;//分散的内存块
    int msg_iovlen;//分散内存块的数量
    void* msg_control;
    socklen_t msg_controllen;
    int msg_flags;
  };
  struct iovec{
      void* iov_base;//内存起始地址
      size_t iov_len;//这块内存长度
  }
  ssize_t recvmsg(int sockfd,struct msghdr* msg,int flags);
  ssize_t sendmsg(int sockfd,struct msghdr* msg,int flags);
  ```

##### 文件描述符集合

```c
#include<sys/select.h>
FD_ZERO(fd_set* fdset);//清除fdset的所有位
FD_SET(int fd,fd_set* fdset);//设置fdset的位fd
FD_CLR(int fd,fd_set* fdset);//清除fdset的位fd
int FD_ISSET(int fd,fd_set* fdset);//测试fdset的位fd是否被设置
```

