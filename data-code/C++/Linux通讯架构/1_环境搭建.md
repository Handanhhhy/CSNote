### 环境搭建

#### Linux环境搭建

##### 	1：Linux版本

​		安装Ubuntu-Server版本。

##### 	2：配置固定ip

​		1：选择一个未被占用的ip，使用ping命令查看，如显示无法访问目标主机则说明该ip未被占用。两台主机需要在同一个网段。

​		2：修改配置文件` /etc/network/interfaces`如下,先查看当前网卡名。

​			在Windows下使用route print命令，查看当前网段 的网关和子网掩码。

```tex
#iface ens33 inet dhcp //禁用自动分配ip
iface ens33 inet static //设置为静态ip
address	192.168.43.120 //手动绑定ip
gateway	192.168.43.159 //网关
netmask	255.255.255.255 //子网掩码
```

​		3：修改DNS，修改`/etc/resoleconf/resolv.conf.d/base`

```tex
nameserver 8.8.8.8 //谷歌的域名解析服务器
```

##### 3：安装编译工具(gcc,g++)

​	为Nginx安装做准备。

```tex
sudo apt-get install gcc
sudo apt-get install g++
```

##### 4：配置远程连接

```tex
sudo apt-get install openssh-server
```



#### Nginx环境搭建

##### 1：下载安装包

​	官网：http://nginx.org/；一般安装最新的stable版本。

​	下载Linux安装包：http://nginx.org/download/nginx-1.18.0.tar.gz

```tex
sudo wget --tries=10 --timeout=10 http://nginx.org/download/nginx-1.18.0.tar.gz
//--tries尝试次数 --timeout超时时间
```

##### 2：Nginx目录简介

```tex
auto/:编译相关的脚本，可执行文件configure会用到这些脚本
    cc/:检查编译器的脚本
    lib/:检查依赖库的脚本
    os/:检查操作系统类型的脚本type/:检查平台类型的脚本
    CHANGES:修复的bug，新增加的功能说明
    CHANGES.ru:俄语版CHANGES
conf/:默认的配置文件
configure:编译nginx之前必须先执行本脚本以生成—些必要的中间文件
contrib/:脚本和工具，典型的是vim高亮工具
	vim/:vim高亮工具
html/:欢迎界面和错误界面相关的html文件man/:nginx帮助文件目录
src/:nginx源码目录
    core:核心代码
    event:event(事件)模块相关代码
    http:http(web服务)模块相关代码
    mail:邮件模块相关代码
    os:操作系统相关代码
    stream:流处理相关代码
objs/:执行了configure生成的中间文件目录
	ngx_modules.c:内容决定了我们一会编译nginx的时候有哪些模块会被编译到nginx里边来
Makefile:执行了configure脚本产生的编译规则文件，执行make命令时用到
```

设置语法高亮：`cp -r contrib/vim ~/.vim`

##### 3：Nginx的编译和安装

1. 安装前提：

   a):epoll,linux内核2.6版本以上；uname -a

   b):gcc,g++编译器

   c):prec库：函数库，支持解析正则表达式；sudo apt install libpcre3-dev

   d):zlib库：压缩解压缩功能；sudo apt install libz-dev

   e):openssl库：ssl功能相关库，用于网站加密通讯；sudo apt install libssl-dev

2. 安装步骤

   a):使用configure来进行编译之前的配置工作。./configure

​		--prefix：指定最终安装到的目录，默认值 ：/usr/local/nginx

​		--sbin-path：指定可执行文件目录，默认值：sbin/nginx

​		--conf-path：指定配置文件目录，默认值：conf/nginx.conf

​		b):使用make编译，生成了可执行文件。sudo make

​		c):再次使用make命令开始安装。sudo make install

##### 4:启动

​	在Nginx安装目录中的sbin下载，使用管理员权限执行nginx文件



#### 解决共享目录问题

​	当共享目录不见之后，重新安装VMWareTools。

```tex
mkdir /mnt/cdrom
sudo mount /dev/cdrom /mnt/cdrom
```

#### 网络配置相关问题

##### 重启网络服务

```tex
sudo service networking restart 
```

##### DNS配置

​	解决DNS重启失效问题

​	1：

```tex
sudo vim /etc/resolvconf/resolv.conf.d/base
//添加nameserver配置
resolvconf -u//将刚刚的配置写入/etc/resolv.conf 避免重启失效
```

​	2：

```tex
sudo vim /etc/network/interfaces
//添加nameserver配置
```



​	

